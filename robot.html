<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Robots</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:Arial, sans-serif; }
body { background:#99ccff; color:#001f4d; overflow-x:hidden; }

h1 {
    margin-top:60px;
    margin-left:10%;
    font-size:36px;
}

.tabs {
    margin-left:10%;
    margin-top:30px;
    display:flex;
    gap:40px;
}

.tab {
    font-size:18px;
    padding:8px 18px;
    cursor:pointer;
    border-radius:50px;
    border:2px solid transparent;
    transition:all 0.3s ease;
}

.tab.active {
    border:2px solid #001f4d;
}

.main-section {
    width:80%;
    margin:50px auto;
    display:flex;
    gap:40px;
}

.model-area, .image-area {
    flex:1;
    background:#3399ff;
    height:400px;
    border-radius:10px;
    display:flex;
    justify-content:center;
    align-items:center;
    position:relative;
    color:white;
}

.image-area img {
    width:80%;
    height:70%;
    object-fit:cover;
    border-radius:8px;
}

.view-buttons {
    position:absolute;
    bottom:20px;
    display:flex;
    gap:12px;
}

.view-buttons button {
    background:#ffffff;
    color:#001f4d;
    border:none;
    padding:8px 18px;
    border-radius:30px;
    font-weight:bold;
    cursor:pointer;
    transition:all 0.25s ease;
    box-shadow:0 3px 8px rgba(0,0,0,0.2);
}

.view-buttons button:hover {
    background:#001f4d;
    color:#ffffff;
    transform:translateY(-2px);
}

.view-buttons button.active {
    background:#001f4d;
    color:#ffffff;
}

.rotating-wrapper {
    width:80%;
    margin:40px auto 0 auto;
}

.rotating-row {
    position:relative;
    height:140px;
    margin:30px 0;
    overflow:hidden;
}

.track {
    display:flex;
    gap:30px;
    position: absolute;
    white-space: nowrap;
}

.rotating-card {
    width:150px;
    height:120px;
    background:#3399ff;
    border-radius:8px;
    color:white;
    text-align:center;
    padding:10px;
    flex-shrink:0;
    cursor:pointer;
}

.rotating-card img {
    width:60px;
    height:60px;
    object-fit:cover;
    margin-bottom:5px;
}

#descriptionBox {
    width:80%;
    margin:40px auto 80px auto;
    background:#3399ff;
    padding:20px;
    border-radius:10px;
    color:white;
    min-height:100px;
}
</style>
</head>
<body>

<h1>Our Robots</h1>

<div class="tabs">
    <div class="tab active" onclick="selectTab(0, this)">23-24 Season</div>
    <div class="tab" onclick="selectTab(1, this)">24-25 Season</div>
    <div class="tab" onclick="selectTab(2, this)">25-26 Season</div>
</div>

<div class="main-section">
    <div class="model-area">3D Model Area</div>

    <div class="image-area">
        <img id="mainImage" src="https://via.placeholder.com/400x300?text=Front+View">
        <div class="view-buttons">
            <button id="btn-front" class="active" onclick="changeView('front',this)">Front View</button>
            <button id="btn-side" onclick="changeView('side',this)">Side View</button>
            <button id="btn-back" onclick="changeView('back',this)">Back View</button>
        </div>
    </div>
</div>

<div class="rotating-wrapper">
    <div class="rotating-row" id="row1"></div>
    <div class="rotating-row" id="row2"></div>
    <div class="rotating-row" id="row3"></div>
</div>

<div id="descriptionBox">
Click a robot card to see its description.
</div>

<script>
const seasons = [
  {
    name: "23-24 Season",
    mainImage: {
        front: "https://via.placeholder.com/400x300?text=23-24+Front",
        side: "https://via.placeholder.com/400x300?text=23-24+Side",
        back: "https://via.placeholder.com/400x300?text=23-24+Back"
    },
    robots_toprow: [
      {title:"Alpha", img:"https://via.placeholder.com/60", desc:"Alpha robot 23-24."},
      {title:"Beta", img:"https://via.placeholder.com/60", desc:"Beta robot 23-24."},
      {title:"Gamma", img:"https://via.placeholder.com/60", desc:"Gamma robot 23-24."},
      {title:"Omega", img:"https://via.placeholder.com/60", desc:"Omega robot 23-24."}
    ],
    robots_middlerow: [
      {title:"A-Mid", img:"https://via.placeholder.com/60", desc:"Mid Alpha 23-24."},
      {title:"B-Mid", img:"https://via.placeholder.com/60", desc:"Mid Beta 23-24."}
    ],
    robots_bottomrow: [] // Demonstrating empty row handling
  },
  {
    name: "24-25 Season",
    mainImage: {
        front: "https://via.placeholder.com/400x300?text=24-25+Front",
        side: "https://via.placeholder.com/400x300?text=24-25+Side",
        back: "https://via.placeholder.com/400x300?text=24-25+Back"
    },
    robots_toprow: [
      {title:"Delta", img:"https://via.placeholder.com/60", desc:"Delta robot 24-25."},
      {title:"Epsilon", img:"https://via.placeholder.com/60", desc:"Epsilon robot 24-25."}
    ],
    robots_middlerow: [
      {title:"Zeta", img:"https://via.placeholder.com/60", desc:"Zeta robot 24-25."},
      {title:"Theta", img:"https://via.placeholder.com/60", desc:"Theta robot 24-25."}
    ],
    robots_bottomrow: [
      {title:"Sigma", img:"https://via.placeholder.com/60", desc:"Sigma robot 24-25."}
    ]
  },
  {
    name: "25-26 Season",
    mainImage: {
        front: "https://via.placeholder.com/400x300?text=25-26+Front",
        side: "https://via.placeholder.com/400x300?text=25-26+Side",
        back: "https://via.placeholder.com/400x300?text=25-26+Back"
    },
    robots_toprow: [{title:"Iota", img:"https://via.placeholder.com/60", desc:"Iota robot 25-26."}],
    robots_middlerow: [{title:"Kappa", img:"https://via.placeholder.com/60", desc:"Kappa robot 25-26."}],
    robots_bottomrow: [{title:"Lambda", img:"https://via.placeholder.com/60", desc:"Lambda robot 25-26."}]
  }
];

let currentSeasonIndex = 0;
let animationIds = {}; // Track animations to stop them when switching tabs

function changeView(view, btn){
    document.getElementById("mainImage").src = seasons[currentSeasonIndex].mainImage[view];
    document.querySelectorAll(".view-buttons button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
}

function showDescription(text){
    document.getElementById("descriptionBox").textContent = text;
}

function createRow(rowId, direction, robotList){
    const row = document.getElementById(rowId);
    
    // 1. Cancel existing animation for this row
    if(animationIds[rowId]) cancelAnimationFrame(animationIds[rowId]);
    row.innerHTML = "";

    // 2. Safety check: Don't run logic if list is empty
    if(!robotList || robotList.length === 0) return;

    const track = document.createElement("div");
    track.className = "track";
    row.appendChild(track);

    // 3. Populate cards
    robotList.forEach(robot => {
        const card = document.createElement("div");
        card.className = "rotating-card";
        card.innerHTML = `<img src="${robot.img}"><div>${robot.title}</div>`;
        card.onclick = () => showDescription(robot.desc);
        track.appendChild(card);
    });

    // 4. Duplicate for seamless scrolling
    const wrapperWidth = row.offsetWidth;
    while(track.scrollWidth < wrapperWidth * 2 + 500){
        const children = Array.from(track.children);
        children.forEach(child => track.appendChild(child.cloneNode(true)));
    }

    let position = 0;
    const trackWidth = track.scrollWidth / 2;
    const speed = 0.8;

    function animate(){
        position += (speed * direction);
        
        // Reset position for infinite loop
        if(direction === 1 && position >= trackWidth) position = 0;
        if(direction === -1 && position <= 0) position = trackWidth;

        track.style.transform = `translateX(${-position}px)`;
        animationIds[rowId] = requestAnimationFrame(animate);
    }
    animate();
}

function loadSeason(index){
    currentSeasonIndex = index;
    const s = seasons[index];
    
    // Reset Image and Buttons
    document.getElementById("mainImage").src = s.mainImage.front;
    document.querySelectorAll(".view-buttons button").forEach(b=>b.classList.remove("active"));
    document.getElementById("btn-front").classList.add("active");

    // Load Rows
    createRow("row1", 1, s.robots_toprow);
    createRow("row2", -1, s.robots_middlerow);
    createRow("row3", 1, s.robots_bottomrow);
}

function selectTab(index, tabEl){
    document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
    tabEl.classList.add("active");
    loadSeason(index);
}

// Initial Load
window.onload = () => loadSeason(0);
</script>
</body>
</html>
